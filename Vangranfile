# -*- mode: ruby -*-
# vi: set ft=ruby :

# Vagrant multi-machine sample setup

Vagrant.configure("2") do |config|

  config.vm.provider "virtualbox" do |vb|
    vb.cpus = 1
    # vb.memory = "2048"
  end

  config.vm.define :mgmt do |vm|
    vm.vm.box = "ubuntu/jammy64"
    vm.vm.network :private_network, ip: "10.0.0.10"
    vm.vm.hostname = "mgmt"
	
	vm.vm.provision "shell", inline: <<-SHELL
    apt update
	  apt install software-properties-common
	  add-apt-repository --yes --update ppa:ansible/ansible
	  apt install -y ansible
    SHELL
  end

  config.vm.define :web do |vm|
    vm.vm.box = "ubuntu/jammy64"
    vm.vm.network :private_network, ip: "10.0.0.11"
    vm.vm.hostname = "web"
	
	vm.vm.provision "shell", inline: <<-SHELL
      apt update
	  apt install software-properties-common
	  add-apt-repository --yes --update ppa:ansible/ansible
	  apt install -y ansible
    SHELL
  end
end